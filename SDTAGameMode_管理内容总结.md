# SDTAGameMode 需要管理的内容总结

根据《七日求生》游戏策划案，`SDTAGameMode` 作为游戏的核心管理器，需要负责以下主要内容：

## 1. 昼夜循环系统
- **时间管理**：控制游戏内时间流逝，管理昼夜交替
- **阶段切换**：
  - 夜晚阶段（3分钟）：核心战斗阶段，位于夜晚室外场景地图
  - 白天阶段（1分钟）：升级选择阶段，位于白天室内场景地图
- **循环控制**：管理7个完整的昼夜循环周期

## 2. 资源与升级系统
- **灵魂碎片管理**：
  - 控制碎片的获取（击败敌人）
  - 管理碎片的消耗（升级）
  - 确保碎片不累积到下一轮（roguelike式重置）
- **升级系统**：
  - 提供三选一升级选项
  - 管理升级效果的应用
  - 控制升级的可用时机（白天阶段）

## 3. 敌人与战斗系统
- **敌人生成**：
  - 按天数难度递增生成敌人
  - 管理不同类型敌人的出现数量
  - 控制敌人的刷新频率
- **敌人AI**：
  - 管理敌人的基础追踪行为
  - 控制敌人的群体战术
  - 实现特殊敌人的行为（如自爆者冲刺爆炸）

## 4. 多人合作系统
- **房间管理**：
  - 创建和管理游戏房间
  - 处理玩家加入和离开
  - 控制游戏开始条件（所有人准备）
- **合作机制**：
  - 实现分数共享制
  - 根据玩家数量调整敌人血量
  - 管理队友倒地救援机制

## 5. 游戏状态与进度管理
- **游戏进度**：
  - 记录当前天数（1-7）
  - 管理游戏阶段（夜晚/白天）
  - 控制游戏胜利条件（生存7天/击败Boss）
- **游戏状态**：
  - 管理游戏开始/结束状态
  - 记录胜利/失败状态
  - 控制游戏的重置和重新开始

## 6. 网络与主机权威系统
- **主机权威框架**：
  - 作为权威服务器，负责所有关键逻辑计算
  - 实现移动和射击的权威验证
  - 管理敌人生成和AI计算
- **网络同步**：
  - 管理游戏状态的网络同步
  - 实现客户端状态同步和表现更新
  - 处理网络延迟和容错

## 7. 评分系统
- **基础评分**：记录生存时间
- **击杀评分**：统计击败敌人数量
- **连击评分**：计算连续击杀奖励
- **合作评分**：提供团队协作加成

## 8. 性能与优化
- **性能管理**：优化主机计算负载
- **网络优化**：实现延迟补偿和网络容错
- **平台适配**：确保PC和Android平台的兼容性

## 开发优先级（第一周）
根据策划案的开发里程碑，第一周应优先实现：
1. 主机权威角色控制系统
2. 网络射击验证机制
3. 基础敌人生成同步

# 总结

`SDTAGameMode` 作为《七日求生》的核心游戏管理器，需要全面负责游戏的昼夜循环、资源管理、敌人系统、多人合作、游戏状态、网络权威、评分系统等关键内容，确保游戏按照策划案的设计正常运行，并提供良好的玩家体验。