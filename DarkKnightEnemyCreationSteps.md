# 使用Dark_Knight_Male素材创建敌人蓝图步骤

## 1. 在UE编辑器中基于CommonEnemy创建蓝图

1. 打开Unreal Engine编辑器
2. 在内容浏览器中导航到你想要保存蓝图的位置（建议：`Content/Blueprints/Enemies/`）
3. 右键点击空白处，选择`蓝图类`
4. 在弹出的"选择父类"对话框中，搜索`CommonEnemy`
5. 选择`CommonEnemy`作为父类，然后点击`选择`
6. 给蓝图命名（例如：`BP_DarkKnightEnemy`）
7. 点击`创建蓝图`

## 2. 将Dark_Knight_Male素材应用到蓝图中

### 设置角色网格
1. 双击打开刚刚创建的蓝图
2. 在蓝图编辑器中，点击左侧的"组件"面板
3. 选择`Mesh`组件（或添加一个`Skeletal Mesh`组件）
4. 在右侧的"细节"面板中，点击`Skeletal Mesh`属性旁边的下拉菜单
5. 导航到`Content/Assets/Dark_Knight/Dark_Knight_Male`路径
6. 选择Dark_Knight_Male的骨架网格

### 配置动画蓝图
1. 在`Mesh`组件的"细节"面板中，找到`动画模式`属性
2. 设置为`使用动画蓝图`
3. 点击`动画蓝图`属性旁边的下拉菜单
4. 如果有现成的适合Dark_Knight的动画蓝图，直接选择
5. 如果没有，需要创建一个新的动画蓝图：
   - 在内容浏览器中右键点击，选择`动画` → `动画蓝图`
   - 选择`Skeletal Mesh Animation Blueprint`
   - 在"选择父类"对话框中，选择`AnimInstance`
   - 选择Dark_Knight_Male的骨架作为目标骨架
   - 命名动画蓝图（例如：`ABP_DarkKnight`）并创建
   - 在动画蓝图中连接必要的动画状态机（idle、walk、run、attack等）

## 3. 配置AI行为参数

1. 在蓝图编辑器中，点击"我的蓝图"面板
2. 展开"默认值"部分
3. 找到`AI Config`类别，调整以下参数：
   - **ChaseRange**：追逐范围（默认2000.0f = 20米）
   - **AttackRange**：攻击范围（默认100.0f = 1米）
   - **AttackCooldown**：攻击冷却时间（默认2.0f秒）
   - **PatrolRange**：巡逻范围（默认500.0f = 5米）
4. 根据Dark_Knight敌人的设计需求调整这些值

## 4. 碰撞和导航设置

### 设置碰撞
1. 确保`Mesh`组件的碰撞设置正确：
   - 在"细节"面板中，展开"碰撞"部分
   - 设置`碰撞预设`为`Pawn`或适合的设置
   - 确保`可影响导航`选项已勾选

2. 为敌人添加碰撞胶囊体（如果没有）：
   - 在"组件"面板中，右键点击根组件，选择"添加组件"
   - 选择`碰撞` → `胶囊体碰撞`
   - 调整胶囊体的大小和位置，使其包裹整个Dark_Knight角色
   - 在"细节"面板中，设置`碰撞预设`为`Pawn`

### 导航设置
1. 在"我的蓝图"面板中，展开"默认值"部分
2. 找到`导航`类别
3. 设置`导航代理半径`和`导航代理高度`以匹配Dark_Knight的尺寸
4. 确保`自动使用导航代理设置`选项已勾选

## 5. 测试和调试敌人AI

### 在关卡中放置敌人
1. 关闭蓝图编辑器（保存更改）
2. 在内容浏览器中找到刚刚创建的蓝图（`BP_DarkKnightEnemy`）
3. 拖拽它到场景中合适的位置

### 构建导航
1. 在内容浏览器中搜索`NavMeshBoundsVolume`
2. 拖拽它到场景中，并调整大小以覆盖整个关卡
3. 点击工具栏中的`构建` → `仅构建导航`

### 测试敌人行为
1. 点击`运行`按钮（或按Ctrl+P）进入游戏模式
2. 控制玩家角色接近敌人，观察它是否开始追逐
3. 进入攻击范围，观察敌人是否发起攻击
4. 远离敌人（超出追逐范围），观察它是否返回巡逻状态

### 调试AI行为
1. 按Alt键+点击敌人，可以查看AI的调试信息
2. 使用AI调试可视化工具：
   - 按P键显示导航网格
   - 在"显示"菜单中选择`导航` → `显示导航代理`
   - 使用`AI调试`工具查看AI的决策过程

## 6. 额外优化（可选）

### 添加死亡动画
1. 在动画蓝图中创建死亡动画状态
2. 在`CommonEnemy`蓝图的`Die`事件中触发死亡动画

### 设置伤害反馈
1. 在`CommonEnemy`蓝图的`TakeDamage`事件中添加伤害反应动画
2. 可以添加粒子效果或声音反馈

### 调整移动速度
1. 在"组件"面板中选择`CharacterMovement`组件
2. 在"细节"面板中调整`最大步行速度`、`加速`和`减速`等参数以匹配Dark_Knight的移动特性

## 注意事项

- 确保所有素材路径正确，避免引用丢失
- 测试AI行为时，确保导航网格已正确构建
- 如果遇到编译错误，检查CommonEnemy类是否已正确编译
- 根据游戏设计需求调整AI参数，平衡游戏难度

按照以上步骤，你就可以成功创建一个基于Dark_Knight_Male素材的敌人蓝图，并使用CommonEnemy类实现的AI行为逻辑。